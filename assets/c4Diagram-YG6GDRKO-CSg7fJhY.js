var _a, _b;
import { B as e, I as t, _ as n, b as r, c as i, r as a, s as o, v as s, z as l } from "./chunk-ABZYJK2D-ODb6qSou.js";
import { g as u, h as d, p as f } from "./src-D8UWkQNo.js";
import "./math-O_7OW4FW.js";
import { _ as p, n as m, r as h } from "./chunk-S3R3BYOJ-D8yhV3IZ.js";
import { t as g } from "./dist-DrVb-WkD.js";
import "./identity-IHMFXfGJ.js";
import { i as _, o as v } from "./chunk-TZMSLE5B-IRLonryi.js";
var y = g(), b = (function() {
  var e2 = d(function(e3, t3, n3, r3) {
    for (n3 || (n3 = {}), r3 = e3.length; r3--; n3[e3[r3]] = t3) ;
    return n3;
  }, `o`), t2 = [1, 24], n2 = [1, 25], r2 = [1, 26], i2 = [1, 27], a2 = [1, 28], o2 = [1, 63], s2 = [1, 64], l2 = [1, 65], u2 = [1, 66], f2 = [1, 67], p2 = [1, 68], m2 = [1, 69], h2 = [1, 29], g2 = [1, 30], _2 = [1, 31], v2 = [1, 32], y2 = [1, 33], b2 = [1, 34], x2 = [1, 35], S2 = [1, 36], C2 = [1, 37], w2 = [1, 38], T2 = [1, 39], E2 = [1, 40], D2 = [1, 41], O2 = [1, 42], k2 = [1, 43], A2 = [1, 44], j2 = [1, 45], M2 = [1, 46], N2 = [1, 47], P2 = [1, 48], F2 = [1, 50], I2 = [1, 51], L2 = [1, 52], R2 = [1, 53], z2 = [1, 54], B2 = [1, 55], V2 = [1, 56], H2 = [1, 57], ee2 = [1, 58], te2 = [1, 59], ne2 = [1, 60], re2 = [14, 42], ie2 = [14, 34, 36, 37, 38, 39, 40, 41, 42, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74], ae2 = [12, 14, 34, 36, 37, 38, 39, 40, 41, 42, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74], U2 = [1, 82], W2 = [1, 83], G2 = [1, 84], K2 = [1, 85], q2 = [12, 14, 42], oe2 = [12, 14, 33, 42], se2 = [12, 14, 33, 42, 76, 77, 79, 80], ce2 = [12, 33], le2 = [34, 36, 37, 38, 39, 40, 41, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74], J2 = { trace: d(function() {
  }, `trace`), yy: {}, symbols_: { error: 2, start: 3, mermaidDoc: 4, direction: 5, direction_tb: 6, direction_bt: 7, direction_rl: 8, direction_lr: 9, graphConfig: 10, C4_CONTEXT: 11, NEWLINE: 12, statements: 13, EOF: 14, C4_CONTAINER: 15, C4_COMPONENT: 16, C4_DYNAMIC: 17, C4_DEPLOYMENT: 18, otherStatements: 19, diagramStatements: 20, otherStatement: 21, title: 22, accDescription: 23, acc_title: 24, acc_title_value: 25, acc_descr: 26, acc_descr_value: 27, acc_descr_multiline_value: 28, boundaryStatement: 29, boundaryStartStatement: 30, boundaryStopStatement: 31, boundaryStart: 32, LBRACE: 33, ENTERPRISE_BOUNDARY: 34, attributes: 35, SYSTEM_BOUNDARY: 36, BOUNDARY: 37, CONTAINER_BOUNDARY: 38, NODE: 39, NODE_L: 40, NODE_R: 41, RBRACE: 42, diagramStatement: 43, PERSON: 44, PERSON_EXT: 45, SYSTEM: 46, SYSTEM_DB: 47, SYSTEM_QUEUE: 48, SYSTEM_EXT: 49, SYSTEM_EXT_DB: 50, SYSTEM_EXT_QUEUE: 51, CONTAINER: 52, CONTAINER_DB: 53, CONTAINER_QUEUE: 54, CONTAINER_EXT: 55, CONTAINER_EXT_DB: 56, CONTAINER_EXT_QUEUE: 57, COMPONENT: 58, COMPONENT_DB: 59, COMPONENT_QUEUE: 60, COMPONENT_EXT: 61, COMPONENT_EXT_DB: 62, COMPONENT_EXT_QUEUE: 63, REL: 64, BIREL: 65, REL_U: 66, REL_D: 67, REL_L: 68, REL_R: 69, REL_B: 70, REL_INDEX: 71, UPDATE_EL_STYLE: 72, UPDATE_REL_STYLE: 73, UPDATE_LAYOUT_CONFIG: 74, attribute: 75, STR: 76, STR_KEY: 77, STR_VALUE: 78, ATTRIBUTE: 79, ATTRIBUTE_EMPTY: 80, $accept: 0, $end: 1 }, terminals_: { 2: `error`, 6: `direction_tb`, 7: `direction_bt`, 8: `direction_rl`, 9: `direction_lr`, 11: `C4_CONTEXT`, 12: `NEWLINE`, 14: `EOF`, 15: `C4_CONTAINER`, 16: `C4_COMPONENT`, 17: `C4_DYNAMIC`, 18: `C4_DEPLOYMENT`, 22: `title`, 23: `accDescription`, 24: `acc_title`, 25: `acc_title_value`, 26: `acc_descr`, 27: `acc_descr_value`, 28: `acc_descr_multiline_value`, 33: `LBRACE`, 34: `ENTERPRISE_BOUNDARY`, 36: `SYSTEM_BOUNDARY`, 37: `BOUNDARY`, 38: `CONTAINER_BOUNDARY`, 39: `NODE`, 40: `NODE_L`, 41: `NODE_R`, 42: `RBRACE`, 44: `PERSON`, 45: `PERSON_EXT`, 46: `SYSTEM`, 47: `SYSTEM_DB`, 48: `SYSTEM_QUEUE`, 49: `SYSTEM_EXT`, 50: `SYSTEM_EXT_DB`, 51: `SYSTEM_EXT_QUEUE`, 52: `CONTAINER`, 53: `CONTAINER_DB`, 54: `CONTAINER_QUEUE`, 55: `CONTAINER_EXT`, 56: `CONTAINER_EXT_DB`, 57: `CONTAINER_EXT_QUEUE`, 58: `COMPONENT`, 59: `COMPONENT_DB`, 60: `COMPONENT_QUEUE`, 61: `COMPONENT_EXT`, 62: `COMPONENT_EXT_DB`, 63: `COMPONENT_EXT_QUEUE`, 64: `REL`, 65: `BIREL`, 66: `REL_U`, 67: `REL_D`, 68: `REL_L`, 69: `REL_R`, 70: `REL_B`, 71: `REL_INDEX`, 72: `UPDATE_EL_STYLE`, 73: `UPDATE_REL_STYLE`, 74: `UPDATE_LAYOUT_CONFIG`, 76: `STR`, 77: `STR_KEY`, 78: `STR_VALUE`, 79: `ATTRIBUTE`, 80: `ATTRIBUTE_EMPTY` }, productions_: [0, [3, 1], [3, 1], [5, 1], [5, 1], [5, 1], [5, 1], [4, 1], [10, 4], [10, 4], [10, 4], [10, 4], [10, 4], [13, 1], [13, 1], [13, 2], [19, 1], [19, 2], [19, 3], [21, 1], [21, 1], [21, 2], [21, 2], [21, 1], [29, 3], [30, 3], [30, 3], [30, 4], [32, 2], [32, 2], [32, 2], [32, 2], [32, 2], [32, 2], [32, 2], [31, 1], [20, 1], [20, 2], [20, 3], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 1], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [43, 2], [35, 1], [35, 2], [75, 1], [75, 2], [75, 1], [75, 1]], performAction: d(function(e3, t3, n3, r3, i3, a3, o3) {
    var s3 = a3.length - 1;
    switch (i3) {
      case 3:
        r3.setDirection(`TB`);
        break;
      case 4:
        r3.setDirection(`BT`);
        break;
      case 5:
        r3.setDirection(`RL`);
        break;
      case 6:
        r3.setDirection(`LR`);
        break;
      case 8:
      case 9:
      case 10:
      case 11:
      case 12:
        r3.setC4Type(a3[s3 - 3]);
        break;
      case 19:
        r3.setTitle(a3[s3].substring(6)), this.$ = a3[s3].substring(6);
        break;
      case 20:
        r3.setAccDescription(a3[s3].substring(15)), this.$ = a3[s3].substring(15);
        break;
      case 21:
        this.$ = a3[s3].trim(), r3.setTitle(this.$);
        break;
      case 22:
      case 23:
        this.$ = a3[s3].trim(), r3.setAccDescription(this.$);
        break;
      case 28:
        a3[s3].splice(2, 0, `ENTERPRISE`), r3.addPersonOrSystemBoundary(...a3[s3]), this.$ = a3[s3];
        break;
      case 29:
        a3[s3].splice(2, 0, `SYSTEM`), r3.addPersonOrSystemBoundary(...a3[s3]), this.$ = a3[s3];
        break;
      case 30:
        r3.addPersonOrSystemBoundary(...a3[s3]), this.$ = a3[s3];
        break;
      case 31:
        a3[s3].splice(2, 0, `CONTAINER`), r3.addContainerBoundary(...a3[s3]), this.$ = a3[s3];
        break;
      case 32:
        r3.addDeploymentNode(`node`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 33:
        r3.addDeploymentNode(`nodeL`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 34:
        r3.addDeploymentNode(`nodeR`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 35:
        r3.popBoundaryParseStack();
        break;
      case 39:
        r3.addPersonOrSystem(`person`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 40:
        r3.addPersonOrSystem(`external_person`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 41:
        r3.addPersonOrSystem(`system`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 42:
        r3.addPersonOrSystem(`system_db`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 43:
        r3.addPersonOrSystem(`system_queue`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 44:
        r3.addPersonOrSystem(`external_system`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 45:
        r3.addPersonOrSystem(`external_system_db`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 46:
        r3.addPersonOrSystem(`external_system_queue`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 47:
        r3.addContainer(`container`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 48:
        r3.addContainer(`container_db`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 49:
        r3.addContainer(`container_queue`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 50:
        r3.addContainer(`external_container`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 51:
        r3.addContainer(`external_container_db`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 52:
        r3.addContainer(`external_container_queue`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 53:
        r3.addComponent(`component`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 54:
        r3.addComponent(`component_db`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 55:
        r3.addComponent(`component_queue`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 56:
        r3.addComponent(`external_component`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 57:
        r3.addComponent(`external_component_db`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 58:
        r3.addComponent(`external_component_queue`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 60:
        r3.addRel(`rel`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 61:
        r3.addRel(`birel`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 62:
        r3.addRel(`rel_u`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 63:
        r3.addRel(`rel_d`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 64:
        r3.addRel(`rel_l`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 65:
        r3.addRel(`rel_r`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 66:
        r3.addRel(`rel_b`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 67:
        a3[s3].splice(0, 1), r3.addRel(`rel`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 68:
        r3.updateElStyle(`update_el_style`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 69:
        r3.updateRelStyle(`update_rel_style`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 70:
        r3.updateLayoutConfig(`update_layout_config`, ...a3[s3]), this.$ = a3[s3];
        break;
      case 71:
        this.$ = [a3[s3]];
        break;
      case 72:
        a3[s3].unshift(a3[s3 - 1]), this.$ = a3[s3];
        break;
      case 73:
      case 75:
        this.$ = a3[s3].trim();
        break;
      case 74:
        let e4 = {};
        e4[a3[s3 - 1].trim()] = a3[s3].trim(), this.$ = e4;
        break;
      case 76:
        this.$ = ``;
        break;
    }
  }, `anonymous`), table: [{ 3: 1, 4: 2, 5: 3, 6: [1, 5], 7: [1, 6], 8: [1, 7], 9: [1, 8], 10: 4, 11: [1, 9], 15: [1, 10], 16: [1, 11], 17: [1, 12], 18: [1, 13] }, { 1: [3] }, { 1: [2, 1] }, { 1: [2, 2] }, { 1: [2, 7] }, { 1: [2, 3] }, { 1: [2, 4] }, { 1: [2, 5] }, { 1: [2, 6] }, { 12: [1, 14] }, { 12: [1, 15] }, { 12: [1, 16] }, { 12: [1, 17] }, { 12: [1, 18] }, { 13: 19, 19: 20, 20: 21, 21: 22, 22: t2, 23: n2, 24: r2, 26: i2, 28: a2, 29: 49, 30: 61, 32: 62, 34: o2, 36: s2, 37: l2, 38: u2, 39: f2, 40: p2, 41: m2, 43: 23, 44: h2, 45: g2, 46: _2, 47: v2, 48: y2, 49: b2, 50: x2, 51: S2, 52: C2, 53: w2, 54: T2, 55: E2, 56: D2, 57: O2, 58: k2, 59: A2, 60: j2, 61: M2, 62: N2, 63: P2, 64: F2, 65: I2, 66: L2, 67: R2, 68: z2, 69: B2, 70: V2, 71: H2, 72: ee2, 73: te2, 74: ne2 }, { 13: 70, 19: 20, 20: 21, 21: 22, 22: t2, 23: n2, 24: r2, 26: i2, 28: a2, 29: 49, 30: 61, 32: 62, 34: o2, 36: s2, 37: l2, 38: u2, 39: f2, 40: p2, 41: m2, 43: 23, 44: h2, 45: g2, 46: _2, 47: v2, 48: y2, 49: b2, 50: x2, 51: S2, 52: C2, 53: w2, 54: T2, 55: E2, 56: D2, 57: O2, 58: k2, 59: A2, 60: j2, 61: M2, 62: N2, 63: P2, 64: F2, 65: I2, 66: L2, 67: R2, 68: z2, 69: B2, 70: V2, 71: H2, 72: ee2, 73: te2, 74: ne2 }, { 13: 71, 19: 20, 20: 21, 21: 22, 22: t2, 23: n2, 24: r2, 26: i2, 28: a2, 29: 49, 30: 61, 32: 62, 34: o2, 36: s2, 37: l2, 38: u2, 39: f2, 40: p2, 41: m2, 43: 23, 44: h2, 45: g2, 46: _2, 47: v2, 48: y2, 49: b2, 50: x2, 51: S2, 52: C2, 53: w2, 54: T2, 55: E2, 56: D2, 57: O2, 58: k2, 59: A2, 60: j2, 61: M2, 62: N2, 63: P2, 64: F2, 65: I2, 66: L2, 67: R2, 68: z2, 69: B2, 70: V2, 71: H2, 72: ee2, 73: te2, 74: ne2 }, { 13: 72, 19: 20, 20: 21, 21: 22, 22: t2, 23: n2, 24: r2, 26: i2, 28: a2, 29: 49, 30: 61, 32: 62, 34: o2, 36: s2, 37: l2, 38: u2, 39: f2, 40: p2, 41: m2, 43: 23, 44: h2, 45: g2, 46: _2, 47: v2, 48: y2, 49: b2, 50: x2, 51: S2, 52: C2, 53: w2, 54: T2, 55: E2, 56: D2, 57: O2, 58: k2, 59: A2, 60: j2, 61: M2, 62: N2, 63: P2, 64: F2, 65: I2, 66: L2, 67: R2, 68: z2, 69: B2, 70: V2, 71: H2, 72: ee2, 73: te2, 74: ne2 }, { 13: 73, 19: 20, 20: 21, 21: 22, 22: t2, 23: n2, 24: r2, 26: i2, 28: a2, 29: 49, 30: 61, 32: 62, 34: o2, 36: s2, 37: l2, 38: u2, 39: f2, 40: p2, 41: m2, 43: 23, 44: h2, 45: g2, 46: _2, 47: v2, 48: y2, 49: b2, 50: x2, 51: S2, 52: C2, 53: w2, 54: T2, 55: E2, 56: D2, 57: O2, 58: k2, 59: A2, 60: j2, 61: M2, 62: N2, 63: P2, 64: F2, 65: I2, 66: L2, 67: R2, 68: z2, 69: B2, 70: V2, 71: H2, 72: ee2, 73: te2, 74: ne2 }, { 14: [1, 74] }, e2(re2, [2, 13], { 43: 23, 29: 49, 30: 61, 32: 62, 20: 75, 34: o2, 36: s2, 37: l2, 38: u2, 39: f2, 40: p2, 41: m2, 44: h2, 45: g2, 46: _2, 47: v2, 48: y2, 49: b2, 50: x2, 51: S2, 52: C2, 53: w2, 54: T2, 55: E2, 56: D2, 57: O2, 58: k2, 59: A2, 60: j2, 61: M2, 62: N2, 63: P2, 64: F2, 65: I2, 66: L2, 67: R2, 68: z2, 69: B2, 70: V2, 71: H2, 72: ee2, 73: te2, 74: ne2 }), e2(re2, [2, 14]), e2(ie2, [2, 16], { 12: [1, 76] }), e2(re2, [2, 36], { 12: [1, 77] }), e2(ae2, [2, 19]), e2(ae2, [2, 20]), { 25: [1, 78] }, { 27: [1, 79] }, e2(ae2, [2, 23]), { 35: 80, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 86, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 87, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 88, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 89, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 90, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 91, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 92, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 93, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 94, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 95, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 96, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 97, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 98, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 99, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 100, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 101, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 102, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 103, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 104, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, e2(q2, [2, 59]), { 35: 105, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 106, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 107, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 108, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 109, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 110, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 111, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 112, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 113, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 114, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 115, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 20: 116, 29: 49, 30: 61, 32: 62, 34: o2, 36: s2, 37: l2, 38: u2, 39: f2, 40: p2, 41: m2, 43: 23, 44: h2, 45: g2, 46: _2, 47: v2, 48: y2, 49: b2, 50: x2, 51: S2, 52: C2, 53: w2, 54: T2, 55: E2, 56: D2, 57: O2, 58: k2, 59: A2, 60: j2, 61: M2, 62: N2, 63: P2, 64: F2, 65: I2, 66: L2, 67: R2, 68: z2, 69: B2, 70: V2, 71: H2, 72: ee2, 73: te2, 74: ne2 }, { 12: [1, 118], 33: [1, 117] }, { 35: 119, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 120, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 121, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 122, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 123, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 124, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 35: 125, 75: 81, 76: U2, 77: W2, 79: G2, 80: K2 }, { 14: [1, 126] }, { 14: [1, 127] }, { 14: [1, 128] }, { 14: [1, 129] }, { 1: [2, 8] }, e2(re2, [2, 15]), e2(ie2, [2, 17], { 21: 22, 19: 130, 22: t2, 23: n2, 24: r2, 26: i2, 28: a2 }), e2(re2, [2, 37], { 19: 20, 20: 21, 21: 22, 43: 23, 29: 49, 30: 61, 32: 62, 13: 131, 22: t2, 23: n2, 24: r2, 26: i2, 28: a2, 34: o2, 36: s2, 37: l2, 38: u2, 39: f2, 40: p2, 41: m2, 44: h2, 45: g2, 46: _2, 47: v2, 48: y2, 49: b2, 50: x2, 51: S2, 52: C2, 53: w2, 54: T2, 55: E2, 56: D2, 57: O2, 58: k2, 59: A2, 60: j2, 61: M2, 62: N2, 63: P2, 64: F2, 65: I2, 66: L2, 67: R2, 68: z2, 69: B2, 70: V2, 71: H2, 72: ee2, 73: te2, 74: ne2 }), e2(ae2, [2, 21]), e2(ae2, [2, 22]), e2(q2, [2, 39]), e2(oe2, [2, 71], { 75: 81, 35: 132, 76: U2, 77: W2, 79: G2, 80: K2 }), e2(se2, [2, 73]), { 78: [1, 133] }, e2(se2, [2, 75]), e2(se2, [2, 76]), e2(q2, [2, 40]), e2(q2, [2, 41]), e2(q2, [2, 42]), e2(q2, [2, 43]), e2(q2, [2, 44]), e2(q2, [2, 45]), e2(q2, [2, 46]), e2(q2, [2, 47]), e2(q2, [2, 48]), e2(q2, [2, 49]), e2(q2, [2, 50]), e2(q2, [2, 51]), e2(q2, [2, 52]), e2(q2, [2, 53]), e2(q2, [2, 54]), e2(q2, [2, 55]), e2(q2, [2, 56]), e2(q2, [2, 57]), e2(q2, [2, 58]), e2(q2, [2, 60]), e2(q2, [2, 61]), e2(q2, [2, 62]), e2(q2, [2, 63]), e2(q2, [2, 64]), e2(q2, [2, 65]), e2(q2, [2, 66]), e2(q2, [2, 67]), e2(q2, [2, 68]), e2(q2, [2, 69]), e2(q2, [2, 70]), { 31: 134, 42: [1, 135] }, { 12: [1, 136] }, { 33: [1, 137] }, e2(ce2, [2, 28]), e2(ce2, [2, 29]), e2(ce2, [2, 30]), e2(ce2, [2, 31]), e2(ce2, [2, 32]), e2(ce2, [2, 33]), e2(ce2, [2, 34]), { 1: [2, 9] }, { 1: [2, 10] }, { 1: [2, 11] }, { 1: [2, 12] }, e2(ie2, [2, 18]), e2(re2, [2, 38]), e2(oe2, [2, 72]), e2(se2, [2, 74]), e2(q2, [2, 24]), e2(q2, [2, 35]), e2(le2, [2, 25]), e2(le2, [2, 26], { 12: [1, 138] }), e2(le2, [2, 27])], defaultActions: { 2: [2, 1], 3: [2, 2], 4: [2, 7], 5: [2, 3], 6: [2, 4], 7: [2, 5], 8: [2, 6], 74: [2, 8], 126: [2, 9], 127: [2, 10], 128: [2, 11], 129: [2, 12] }, parseError: d(function(e3, t3) {
    if (t3.recoverable) this.trace(e3);
    else {
      var n3 = Error(e3);
      throw n3.hash = t3, n3;
    }
  }, `parseError`), parse: d(function(e3) {
    var t3 = this, n3 = [0], r3 = [], i3 = [null], a3 = [], o3 = this.table, s3 = ``, l3 = 0, u3 = 0, f3 = 0, p3 = 2, m3 = 1, h3 = a3.slice.call(arguments, 1), g3 = Object.create(this.lexer), _3 = { yy: {} };
    for (var v3 in this.yy) Object.prototype.hasOwnProperty.call(this.yy, v3) && (_3.yy[v3] = this.yy[v3]);
    g3.setInput(e3, _3.yy), _3.yy.lexer = g3, _3.yy.parser = this, g3.yylloc === void 0 && (g3.yylloc = {});
    var y3 = g3.yylloc;
    a3.push(y3);
    var b3 = g3.options && g3.options.ranges;
    typeof _3.yy.parseError == `function` ? this.parseError = _3.yy.parseError : this.parseError = Object.getPrototypeOf(this).parseError;
    function x3(e4) {
      n3.length -= 2 * e4, i3.length -= e4, a3.length -= e4;
    }
    d(x3, `popStack`);
    function S3() {
      var e4 = r3.pop() || g3.lex() || m3;
      return typeof e4 != `number` && (e4 instanceof Array && (r3 = e4, e4 = r3.pop()), e4 = t3.symbols_[e4] || e4), e4;
    }
    d(S3, `lex`);
    for (var C3, w3, T3, E3, D3, O3 = {}, k3, A3, j3, M3; ; ) {
      if (T3 = n3[n3.length - 1], this.defaultActions[T3] ? E3 = this.defaultActions[T3] : (C3 ?? (C3 = S3()), E3 = o3[T3] && o3[T3][C3]), E3 === void 0 || !E3.length || !E3[0]) {
        var N3 = ``;
        for (k3 in M3 = [], o3[T3]) this.terminals_[k3] && k3 > p3 && M3.push(`'` + this.terminals_[k3] + `'`);
        N3 = g3.showPosition ? `Parse error on line ` + (l3 + 1) + `:
` + g3.showPosition() + `
Expecting ` + M3.join(`, `) + `, got '` + (this.terminals_[C3] || C3) + `'` : `Parse error on line ` + (l3 + 1) + `: Unexpected ` + (C3 == m3 ? `end of input` : `'` + (this.terminals_[C3] || C3) + `'`), this.parseError(N3, { text: g3.match, token: this.terminals_[C3] || C3, line: g3.yylineno, loc: y3, expected: M3 });
      }
      if (E3[0] instanceof Array && E3.length > 1) throw Error(`Parse Error: multiple actions possible at state: ` + T3 + `, token: ` + C3);
      switch (E3[0]) {
        case 1:
          n3.push(C3), i3.push(g3.yytext), a3.push(g3.yylloc), n3.push(E3[1]), C3 = null, w3 ? (C3 = w3, w3 = null) : (u3 = g3.yyleng, s3 = g3.yytext, l3 = g3.yylineno, y3 = g3.yylloc, f3 > 0 && f3--);
          break;
        case 2:
          if (A3 = this.productions_[E3[1]][1], O3.$ = i3[i3.length - A3], O3._$ = { first_line: a3[a3.length - (A3 || 1)].first_line, last_line: a3[a3.length - 1].last_line, first_column: a3[a3.length - (A3 || 1)].first_column, last_column: a3[a3.length - 1].last_column }, b3 && (O3._$.range = [a3[a3.length - (A3 || 1)].range[0], a3[a3.length - 1].range[1]]), D3 = this.performAction.apply(O3, [s3, u3, l3, _3.yy, E3[1], i3, a3].concat(h3)), D3 !== void 0) return D3;
          A3 && (n3 = n3.slice(0, -1 * A3 * 2), i3 = i3.slice(0, -1 * A3), a3 = a3.slice(0, -1 * A3)), n3.push(this.productions_[E3[1]][0]), i3.push(O3.$), a3.push(O3._$), j3 = o3[n3[n3.length - 2]][n3[n3.length - 1]], n3.push(j3);
          break;
        case 3:
          return true;
      }
    }
    return true;
  }, `parse`) };
  J2.lexer = (function() {
    return { EOF: 1, parseError: d(function(e3, t3) {
      if (this.yy.parser) this.yy.parser.parseError(e3, t3);
      else throw Error(e3);
    }, `parseError`), setInput: d(function(e3, t3) {
      return this.yy = t3 || this.yy || {}, this._input = e3, this._more = this._backtrack = this.done = false, this.yylineno = this.yyleng = 0, this.yytext = this.matched = this.match = ``, this.conditionStack = [`INITIAL`], this.yylloc = { first_line: 1, first_column: 0, last_line: 1, last_column: 0 }, this.options.ranges && (this.yylloc.range = [0, 0]), this.offset = 0, this;
    }, `setInput`), input: d(function() {
      var e3 = this._input[0];
      return this.yytext += e3, this.yyleng++, this.offset++, this.match += e3, this.matched += e3, e3.match(/(?:\r\n?|\n).*/g) ? (this.yylineno++, this.yylloc.last_line++) : this.yylloc.last_column++, this.options.ranges && this.yylloc.range[1]++, this._input = this._input.slice(1), e3;
    }, `input`), unput: d(function(e3) {
      var t3 = e3.length, n3 = e3.split(/(?:\r\n?|\n)/g);
      this._input = e3 + this._input, this.yytext = this.yytext.substr(0, this.yytext.length - t3), this.offset -= t3;
      var r3 = this.match.split(/(?:\r\n?|\n)/g);
      this.match = this.match.substr(0, this.match.length - 1), this.matched = this.matched.substr(0, this.matched.length - 1), n3.length - 1 && (this.yylineno -= n3.length - 1);
      var i3 = this.yylloc.range;
      return this.yylloc = { first_line: this.yylloc.first_line, last_line: this.yylineno + 1, first_column: this.yylloc.first_column, last_column: n3 ? (n3.length === r3.length ? this.yylloc.first_column : 0) + r3[r3.length - n3.length].length - n3[0].length : this.yylloc.first_column - t3 }, this.options.ranges && (this.yylloc.range = [i3[0], i3[0] + this.yyleng - t3]), this.yyleng = this.yytext.length, this;
    }, `unput`), more: d(function() {
      return this._more = true, this;
    }, `more`), reject: d(function() {
      if (this.options.backtrack_lexer) this._backtrack = true;
      else return this.parseError(`Lexical error on line ` + (this.yylineno + 1) + `. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
` + this.showPosition(), { text: ``, token: null, line: this.yylineno });
      return this;
    }, `reject`), less: d(function(e3) {
      this.unput(this.match.slice(e3));
    }, `less`), pastInput: d(function() {
      var e3 = this.matched.substr(0, this.matched.length - this.match.length);
      return (e3.length > 20 ? `...` : ``) + e3.substr(-20).replace(/\n/g, ``);
    }, `pastInput`), upcomingInput: d(function() {
      var e3 = this.match;
      return e3.length < 20 && (e3 += this._input.substr(0, 20 - e3.length)), (e3.substr(0, 20) + (e3.length > 20 ? `...` : ``)).replace(/\n/g, ``);
    }, `upcomingInput`), showPosition: d(function() {
      var e3 = this.pastInput(), t3 = Array(e3.length + 1).join(`-`);
      return e3 + this.upcomingInput() + `
` + t3 + `^`;
    }, `showPosition`), test_match: d(function(e3, t3) {
      var n3, r3, i3;
      if (this.options.backtrack_lexer && (i3 = { yylineno: this.yylineno, yylloc: { first_line: this.yylloc.first_line, last_line: this.last_line, first_column: this.yylloc.first_column, last_column: this.yylloc.last_column }, yytext: this.yytext, match: this.match, matches: this.matches, matched: this.matched, yyleng: this.yyleng, offset: this.offset, _more: this._more, _input: this._input, yy: this.yy, conditionStack: this.conditionStack.slice(0), done: this.done }, this.options.ranges && (i3.yylloc.range = this.yylloc.range.slice(0))), r3 = e3[0].match(/(?:\r\n?|\n).*/g), r3 && (this.yylineno += r3.length), this.yylloc = { first_line: this.yylloc.last_line, last_line: this.yylineno + 1, first_column: this.yylloc.last_column, last_column: r3 ? r3[r3.length - 1].length - r3[r3.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + e3[0].length }, this.yytext += e3[0], this.match += e3[0], this.matches = e3, this.yyleng = this.yytext.length, this.options.ranges && (this.yylloc.range = [this.offset, this.offset += this.yyleng]), this._more = false, this._backtrack = false, this._input = this._input.slice(e3[0].length), this.matched += e3[0], n3 = this.performAction.call(this, this.yy, this, t3, this.conditionStack[this.conditionStack.length - 1]), this.done && this._input && (this.done = false), n3) return n3;
      if (this._backtrack) {
        for (var a3 in i3) this[a3] = i3[a3];
        return false;
      }
      return false;
    }, `test_match`), next: d(function() {
      if (this.done) return this.EOF;
      this._input || (this.done = true);
      var e3, t3, n3, r3;
      this._more || (this.yytext = ``, this.match = ``);
      for (var i3 = this._currentRules(), a3 = 0; a3 < i3.length; a3++) if (n3 = this._input.match(this.rules[i3[a3]]), n3 && (!t3 || n3[0].length > t3[0].length)) {
        if (t3 = n3, r3 = a3, this.options.backtrack_lexer) {
          if (e3 = this.test_match(n3, i3[a3]), e3 !== false) return e3;
          if (this._backtrack) {
            t3 = false;
            continue;
          } else return false;
        } else if (!this.options.flex) break;
      }
      return t3 ? (e3 = this.test_match(t3, i3[r3]), e3 === false ? false : e3) : this._input === `` ? this.EOF : this.parseError(`Lexical error on line ` + (this.yylineno + 1) + `. Unrecognized text.
` + this.showPosition(), { text: ``, token: null, line: this.yylineno });
    }, `next`), lex: d(function() {
      return this.next() || this.lex();
    }, `lex`), begin: d(function(e3) {
      this.conditionStack.push(e3);
    }, `begin`), popState: d(function() {
      return this.conditionStack.length - 1 > 0 ? this.conditionStack.pop() : this.conditionStack[0];
    }, `popState`), _currentRules: d(function() {
      return this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1] ? this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules : this.conditions.INITIAL.rules;
    }, `_currentRules`), topState: d(function(e3) {
      return e3 = this.conditionStack.length - 1 - Math.abs(e3 || 0), e3 >= 0 ? this.conditionStack[e3] : `INITIAL`;
    }, `topState`), pushState: d(function(e3) {
      this.begin(e3);
    }, `pushState`), stateStackSize: d(function() {
      return this.conditionStack.length;
    }, `stateStackSize`), options: {}, performAction: d(function(e3, t3, n3, r3) {
      switch (n3) {
        case 0:
          return 6;
        case 1:
          return 7;
        case 2:
          return 8;
        case 3:
          return 9;
        case 4:
          return 22;
        case 5:
          return 23;
        case 6:
          return this.begin(`acc_title`), 24;
        case 7:
          return this.popState(), `acc_title_value`;
        case 8:
          return this.begin(`acc_descr`), 26;
        case 9:
          return this.popState(), `acc_descr_value`;
        case 10:
          this.begin(`acc_descr_multiline`);
          break;
        case 11:
          this.popState();
          break;
        case 12:
          return `acc_descr_multiline_value`;
        case 13:
          break;
        case 14:
          c;
          break;
        case 15:
          return 12;
        case 16:
          break;
        case 17:
          return 11;
        case 18:
          return 15;
        case 19:
          return 16;
        case 20:
          return 17;
        case 21:
          return 18;
        case 22:
          return this.begin(`person_ext`), 45;
        case 23:
          return this.begin(`person`), 44;
        case 24:
          return this.begin(`system_ext_queue`), 51;
        case 25:
          return this.begin(`system_ext_db`), 50;
        case 26:
          return this.begin(`system_ext`), 49;
        case 27:
          return this.begin(`system_queue`), 48;
        case 28:
          return this.begin(`system_db`), 47;
        case 29:
          return this.begin(`system`), 46;
        case 30:
          return this.begin(`boundary`), 37;
        case 31:
          return this.begin(`enterprise_boundary`), 34;
        case 32:
          return this.begin(`system_boundary`), 36;
        case 33:
          return this.begin(`container_ext_queue`), 57;
        case 34:
          return this.begin(`container_ext_db`), 56;
        case 35:
          return this.begin(`container_ext`), 55;
        case 36:
          return this.begin(`container_queue`), 54;
        case 37:
          return this.begin(`container_db`), 53;
        case 38:
          return this.begin(`container`), 52;
        case 39:
          return this.begin(`container_boundary`), 38;
        case 40:
          return this.begin(`component_ext_queue`), 63;
        case 41:
          return this.begin(`component_ext_db`), 62;
        case 42:
          return this.begin(`component_ext`), 61;
        case 43:
          return this.begin(`component_queue`), 60;
        case 44:
          return this.begin(`component_db`), 59;
        case 45:
          return this.begin(`component`), 58;
        case 46:
          return this.begin(`node`), 39;
        case 47:
          return this.begin(`node`), 39;
        case 48:
          return this.begin(`node_l`), 40;
        case 49:
          return this.begin(`node_r`), 41;
        case 50:
          return this.begin(`rel`), 64;
        case 51:
          return this.begin(`birel`), 65;
        case 52:
          return this.begin(`rel_u`), 66;
        case 53:
          return this.begin(`rel_u`), 66;
        case 54:
          return this.begin(`rel_d`), 67;
        case 55:
          return this.begin(`rel_d`), 67;
        case 56:
          return this.begin(`rel_l`), 68;
        case 57:
          return this.begin(`rel_l`), 68;
        case 58:
          return this.begin(`rel_r`), 69;
        case 59:
          return this.begin(`rel_r`), 69;
        case 60:
          return this.begin(`rel_b`), 70;
        case 61:
          return this.begin(`rel_index`), 71;
        case 62:
          return this.begin(`update_el_style`), 72;
        case 63:
          return this.begin(`update_rel_style`), 73;
        case 64:
          return this.begin(`update_layout_config`), 74;
        case 65:
          return `EOF_IN_STRUCT`;
        case 66:
          return this.begin(`attribute`), `ATTRIBUTE_EMPTY`;
        case 67:
          this.begin(`attribute`);
          break;
        case 68:
          this.popState(), this.popState();
          break;
        case 69:
          return 80;
        case 70:
          break;
        case 71:
          return 80;
        case 72:
          this.begin(`string`);
          break;
        case 73:
          this.popState();
          break;
        case 74:
          return `STR`;
        case 75:
          this.begin(`string_kv`);
          break;
        case 76:
          return this.begin(`string_kv_key`), `STR_KEY`;
        case 77:
          this.popState(), this.begin(`string_kv_value`);
          break;
        case 78:
          return `STR_VALUE`;
        case 79:
          this.popState(), this.popState();
          break;
        case 80:
          return `STR`;
        case 81:
          return `LBRACE`;
        case 82:
          return `RBRACE`;
        case 83:
          return `SPACE`;
        case 84:
          return `EOL`;
        case 85:
          return 14;
      }
    }, `anonymous`), rules: [/^(?:.*direction\s+TB[^\n]*)/, /^(?:.*direction\s+BT[^\n]*)/, /^(?:.*direction\s+RL[^\n]*)/, /^(?:.*direction\s+LR[^\n]*)/, /^(?:title\s[^#\n;]+)/, /^(?:accDescription\s[^#\n;]+)/, /^(?:accTitle\s*:\s*)/, /^(?:(?!\n||)*[^\n]*)/, /^(?:accDescr\s*:\s*)/, /^(?:(?!\n||)*[^\n]*)/, /^(?:accDescr\s*\{\s*)/, /^(?:[\}])/, /^(?:[^\}]*)/, /^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/, /^(?:%%[^\n]*(\r?\n)*)/, /^(?:\s*(\r?\n)+)/, /^(?:\s+)/, /^(?:C4Context\b)/, /^(?:C4Container\b)/, /^(?:C4Component\b)/, /^(?:C4Dynamic\b)/, /^(?:C4Deployment\b)/, /^(?:Person_Ext\b)/, /^(?:Person\b)/, /^(?:SystemQueue_Ext\b)/, /^(?:SystemDb_Ext\b)/, /^(?:System_Ext\b)/, /^(?:SystemQueue\b)/, /^(?:SystemDb\b)/, /^(?:System\b)/, /^(?:Boundary\b)/, /^(?:Enterprise_Boundary\b)/, /^(?:System_Boundary\b)/, /^(?:ContainerQueue_Ext\b)/, /^(?:ContainerDb_Ext\b)/, /^(?:Container_Ext\b)/, /^(?:ContainerQueue\b)/, /^(?:ContainerDb\b)/, /^(?:Container\b)/, /^(?:Container_Boundary\b)/, /^(?:ComponentQueue_Ext\b)/, /^(?:ComponentDb_Ext\b)/, /^(?:Component_Ext\b)/, /^(?:ComponentQueue\b)/, /^(?:ComponentDb\b)/, /^(?:Component\b)/, /^(?:Deployment_Node\b)/, /^(?:Node\b)/, /^(?:Node_L\b)/, /^(?:Node_R\b)/, /^(?:Rel\b)/, /^(?:BiRel\b)/, /^(?:Rel_Up\b)/, /^(?:Rel_U\b)/, /^(?:Rel_Down\b)/, /^(?:Rel_D\b)/, /^(?:Rel_Left\b)/, /^(?:Rel_L\b)/, /^(?:Rel_Right\b)/, /^(?:Rel_R\b)/, /^(?:Rel_Back\b)/, /^(?:RelIndex\b)/, /^(?:UpdateElementStyle\b)/, /^(?:UpdateRelStyle\b)/, /^(?:UpdateLayoutConfig\b)/, /^(?:$)/, /^(?:[(][ ]*[,])/, /^(?:[(])/, /^(?:[)])/, /^(?:,,)/, /^(?:,)/, /^(?:[ ]*["]["])/, /^(?:[ ]*["])/, /^(?:["])/, /^(?:[^"]*)/, /^(?:[ ]*[\$])/, /^(?:[^=]*)/, /^(?:[=][ ]*["])/, /^(?:[^"]+)/, /^(?:["])/, /^(?:[^,]+)/, /^(?:\{)/, /^(?:\})/, /^(?:[\s]+)/, /^(?:[\n\r]+)/, /^(?:$)/], conditions: { acc_descr_multiline: { rules: [11, 12], inclusive: false }, acc_descr: { rules: [9], inclusive: false }, acc_title: { rules: [7], inclusive: false }, string_kv_value: { rules: [78, 79], inclusive: false }, string_kv_key: { rules: [77], inclusive: false }, string_kv: { rules: [76], inclusive: false }, string: { rules: [73, 74], inclusive: false }, attribute: { rules: [68, 69, 70, 71, 72, 75, 80], inclusive: false }, update_layout_config: { rules: [65, 66, 67, 68], inclusive: false }, update_rel_style: { rules: [65, 66, 67, 68], inclusive: false }, update_el_style: { rules: [65, 66, 67, 68], inclusive: false }, rel_b: { rules: [65, 66, 67, 68], inclusive: false }, rel_r: { rules: [65, 66, 67, 68], inclusive: false }, rel_l: { rules: [65, 66, 67, 68], inclusive: false }, rel_d: { rules: [65, 66, 67, 68], inclusive: false }, rel_u: { rules: [65, 66, 67, 68], inclusive: false }, rel_bi: { rules: [], inclusive: false }, rel: { rules: [65, 66, 67, 68], inclusive: false }, node_r: { rules: [65, 66, 67, 68], inclusive: false }, node_l: { rules: [65, 66, 67, 68], inclusive: false }, node: { rules: [65, 66, 67, 68], inclusive: false }, index: { rules: [], inclusive: false }, rel_index: { rules: [65, 66, 67, 68], inclusive: false }, component_ext_queue: { rules: [], inclusive: false }, component_ext_db: { rules: [65, 66, 67, 68], inclusive: false }, component_ext: { rules: [65, 66, 67, 68], inclusive: false }, component_queue: { rules: [65, 66, 67, 68], inclusive: false }, component_db: { rules: [65, 66, 67, 68], inclusive: false }, component: { rules: [65, 66, 67, 68], inclusive: false }, container_boundary: { rules: [65, 66, 67, 68], inclusive: false }, container_ext_queue: { rules: [65, 66, 67, 68], inclusive: false }, container_ext_db: { rules: [65, 66, 67, 68], inclusive: false }, container_ext: { rules: [65, 66, 67, 68], inclusive: false }, container_queue: { rules: [65, 66, 67, 68], inclusive: false }, container_db: { rules: [65, 66, 67, 68], inclusive: false }, container: { rules: [65, 66, 67, 68], inclusive: false }, birel: { rules: [65, 66, 67, 68], inclusive: false }, system_boundary: { rules: [65, 66, 67, 68], inclusive: false }, enterprise_boundary: { rules: [65, 66, 67, 68], inclusive: false }, boundary: { rules: [65, 66, 67, 68], inclusive: false }, system_ext_queue: { rules: [65, 66, 67, 68], inclusive: false }, system_ext_db: { rules: [65, 66, 67, 68], inclusive: false }, system_ext: { rules: [65, 66, 67, 68], inclusive: false }, system_queue: { rules: [65, 66, 67, 68], inclusive: false }, system_db: { rules: [65, 66, 67, 68], inclusive: false }, system: { rules: [65, 66, 67, 68], inclusive: false }, person_ext: { rules: [65, 66, 67, 68], inclusive: false }, person: { rules: [65, 66, 67, 68], inclusive: false }, INITIAL: { rules: [0, 1, 2, 3, 4, 5, 6, 8, 10, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 81, 82, 83, 84, 85], inclusive: true } } };
  })();
  function ue2() {
    this.yy = {};
  }
  return d(ue2, `Parser`), ue2.prototype = J2, J2.Parser = ue2, new ue2();
})();
b.parser = b;
var x = b, S = [], C = [``], w = `global`, T = ``, E = [{ alias: `global`, label: { text: `global` }, type: { text: `global` }, tags: null, link: null, parentBoundary: `` }], D = [], O = ``, k = false, A = 4, j = 2, M, N = d(function() {
  return M;
}, `getC4Type`), P = d(function(e2) {
  M = t(e2, r());
}, `setC4Type`), F = d(function(e2, t2, n2, r2, i2, a2, o2, s2, l2) {
  if (e2 == null || t2 == null || n2 == null || r2 == null) return;
  let u2 = {}, d2 = D.find((e3) => e3.from === t2 && e3.to === n2);
  if (d2 ? u2 = d2 : D.push(u2), u2.type = e2, u2.from = t2, u2.to = n2, u2.label = { text: r2 }, i2 == null) u2.techn = { text: `` };
  else if (typeof i2 == `object`) {
    let [e3, t3] = Object.entries(i2)[0];
    u2[e3] = { text: t3 };
  } else u2.techn = { text: i2 };
  if (a2 == null) u2.descr = { text: `` };
  else if (typeof a2 == `object`) {
    let [e3, t3] = Object.entries(a2)[0];
    u2[e3] = { text: t3 };
  } else u2.descr = { text: a2 };
  if (typeof o2 == `object`) {
    let [e3, t3] = Object.entries(o2)[0];
    u2[e3] = t3;
  } else u2.sprite = o2;
  if (typeof s2 == `object`) {
    let [e3, t3] = Object.entries(s2)[0];
    u2[e3] = t3;
  } else u2.tags = s2;
  if (typeof l2 == `object`) {
    let [e3, t3] = Object.entries(l2)[0];
    u2[e3] = t3;
  } else u2.link = l2;
  u2.wrap = J();
}, `addRel`), I = d(function(e2, t2, n2, r2, i2, a2, o2) {
  if (t2 === null || n2 === null) return;
  let s2 = {}, l2 = S.find((e3) => e3.alias === t2);
  if (l2 && t2 === l2.alias ? s2 = l2 : (s2.alias = t2, S.push(s2)), n2 == null ? s2.label = { text: `` } : s2.label = { text: n2 }, r2 == null) s2.descr = { text: `` };
  else if (typeof r2 == `object`) {
    let [e3, t3] = Object.entries(r2)[0];
    s2[e3] = { text: t3 };
  } else s2.descr = { text: r2 };
  if (typeof i2 == `object`) {
    let [e3, t3] = Object.entries(i2)[0];
    s2[e3] = t3;
  } else s2.sprite = i2;
  if (typeof a2 == `object`) {
    let [e3, t3] = Object.entries(a2)[0];
    s2[e3] = t3;
  } else s2.tags = a2;
  if (typeof o2 == `object`) {
    let [e3, t3] = Object.entries(o2)[0];
    s2[e3] = t3;
  } else s2.link = o2;
  s2.typeC4Shape = { text: e2 }, s2.parentBoundary = w, s2.wrap = J();
}, `addPersonOrSystem`), L = d(function(e2, t2, n2, r2, i2, a2, o2, s2) {
  if (t2 === null || n2 === null) return;
  let l2 = {}, u2 = S.find((e3) => e3.alias === t2);
  if (u2 && t2 === u2.alias ? l2 = u2 : (l2.alias = t2, S.push(l2)), n2 == null ? l2.label = { text: `` } : l2.label = { text: n2 }, r2 == null) l2.techn = { text: `` };
  else if (typeof r2 == `object`) {
    let [e3, t3] = Object.entries(r2)[0];
    l2[e3] = { text: t3 };
  } else l2.techn = { text: r2 };
  if (i2 == null) l2.descr = { text: `` };
  else if (typeof i2 == `object`) {
    let [e3, t3] = Object.entries(i2)[0];
    l2[e3] = { text: t3 };
  } else l2.descr = { text: i2 };
  if (typeof a2 == `object`) {
    let [e3, t3] = Object.entries(a2)[0];
    l2[e3] = t3;
  } else l2.sprite = a2;
  if (typeof o2 == `object`) {
    let [e3, t3] = Object.entries(o2)[0];
    l2[e3] = t3;
  } else l2.tags = o2;
  if (typeof s2 == `object`) {
    let [e3, t3] = Object.entries(s2)[0];
    l2[e3] = t3;
  } else l2.link = s2;
  l2.wrap = J(), l2.typeC4Shape = { text: e2 }, l2.parentBoundary = w;
}, `addContainer`), R = d(function(e2, t2, n2, r2, i2, a2, o2, s2) {
  if (t2 === null || n2 === null) return;
  let l2 = {}, u2 = S.find((e3) => e3.alias === t2);
  if (u2 && t2 === u2.alias ? l2 = u2 : (l2.alias = t2, S.push(l2)), n2 == null ? l2.label = { text: `` } : l2.label = { text: n2 }, r2 == null) l2.techn = { text: `` };
  else if (typeof r2 == `object`) {
    let [e3, t3] = Object.entries(r2)[0];
    l2[e3] = { text: t3 };
  } else l2.techn = { text: r2 };
  if (i2 == null) l2.descr = { text: `` };
  else if (typeof i2 == `object`) {
    let [e3, t3] = Object.entries(i2)[0];
    l2[e3] = { text: t3 };
  } else l2.descr = { text: i2 };
  if (typeof a2 == `object`) {
    let [e3, t3] = Object.entries(a2)[0];
    l2[e3] = t3;
  } else l2.sprite = a2;
  if (typeof o2 == `object`) {
    let [e3, t3] = Object.entries(o2)[0];
    l2[e3] = t3;
  } else l2.tags = o2;
  if (typeof s2 == `object`) {
    let [e3, t3] = Object.entries(s2)[0];
    l2[e3] = t3;
  } else l2.link = s2;
  l2.wrap = J(), l2.typeC4Shape = { text: e2 }, l2.parentBoundary = w;
}, `addComponent`), z = d(function(e2, t2, n2, r2, i2) {
  if (e2 === null || t2 === null) return;
  let a2 = {}, o2 = E.find((t3) => t3.alias === e2);
  if (o2 && e2 === o2.alias ? a2 = o2 : (a2.alias = e2, E.push(a2)), t2 == null ? a2.label = { text: `` } : a2.label = { text: t2 }, n2 == null) a2.type = { text: `system` };
  else if (typeof n2 == `object`) {
    let [e3, t3] = Object.entries(n2)[0];
    a2[e3] = { text: t3 };
  } else a2.type = { text: n2 };
  if (typeof r2 == `object`) {
    let [e3, t3] = Object.entries(r2)[0];
    a2[e3] = t3;
  } else a2.tags = r2;
  if (typeof i2 == `object`) {
    let [e3, t3] = Object.entries(i2)[0];
    a2[e3] = t3;
  } else a2.link = i2;
  a2.parentBoundary = w, a2.wrap = J(), T = w, w = e2, C.push(T);
}, `addPersonOrSystemBoundary`), B = d(function(e2, t2, n2, r2, i2) {
  if (e2 === null || t2 === null) return;
  let a2 = {}, o2 = E.find((t3) => t3.alias === e2);
  if (o2 && e2 === o2.alias ? a2 = o2 : (a2.alias = e2, E.push(a2)), t2 == null ? a2.label = { text: `` } : a2.label = { text: t2 }, n2 == null) a2.type = { text: `container` };
  else if (typeof n2 == `object`) {
    let [e3, t3] = Object.entries(n2)[0];
    a2[e3] = { text: t3 };
  } else a2.type = { text: n2 };
  if (typeof r2 == `object`) {
    let [e3, t3] = Object.entries(r2)[0];
    a2[e3] = t3;
  } else a2.tags = r2;
  if (typeof i2 == `object`) {
    let [e3, t3] = Object.entries(i2)[0];
    a2[e3] = t3;
  } else a2.link = i2;
  a2.parentBoundary = w, a2.wrap = J(), T = w, w = e2, C.push(T);
}, `addContainerBoundary`), V = d(function(e2, t2, n2, r2, i2, a2, o2, s2) {
  if (t2 === null || n2 === null) return;
  let l2 = {}, u2 = E.find((e3) => e3.alias === t2);
  if (u2 && t2 === u2.alias ? l2 = u2 : (l2.alias = t2, E.push(l2)), n2 == null ? l2.label = { text: `` } : l2.label = { text: n2 }, r2 == null) l2.type = { text: `node` };
  else if (typeof r2 == `object`) {
    let [e3, t3] = Object.entries(r2)[0];
    l2[e3] = { text: t3 };
  } else l2.type = { text: r2 };
  if (i2 == null) l2.descr = { text: `` };
  else if (typeof i2 == `object`) {
    let [e3, t3] = Object.entries(i2)[0];
    l2[e3] = { text: t3 };
  } else l2.descr = { text: i2 };
  if (typeof o2 == `object`) {
    let [e3, t3] = Object.entries(o2)[0];
    l2[e3] = t3;
  } else l2.tags = o2;
  if (typeof s2 == `object`) {
    let [e3, t3] = Object.entries(s2)[0];
    l2[e3] = t3;
  } else l2.link = s2;
  l2.nodeType = e2, l2.parentBoundary = w, l2.wrap = J(), T = w, w = t2, C.push(T);
}, `addDeploymentNode`), H = d(function() {
  w = T, C.pop(), T = C.pop(), C.push(T);
}, `popBoundaryParseStack`), ee = d(function(e2, t2, n2, r2, i2, a2, o2, s2, l2, u2, d2) {
  let f2 = S.find((e3) => e3.alias === t2);
  if (!(f2 === void 0 && (f2 = E.find((e3) => e3.alias === t2), f2 === void 0))) {
    if (n2 != null) if (typeof n2 == `object`) {
      let [e3, t3] = Object.entries(n2)[0];
      f2[e3] = t3;
    } else f2.bgColor = n2;
    if (r2 != null) if (typeof r2 == `object`) {
      let [e3, t3] = Object.entries(r2)[0];
      f2[e3] = t3;
    } else f2.fontColor = r2;
    if (i2 != null) if (typeof i2 == `object`) {
      let [e3, t3] = Object.entries(i2)[0];
      f2[e3] = t3;
    } else f2.borderColor = i2;
    if (a2 != null) if (typeof a2 == `object`) {
      let [e3, t3] = Object.entries(a2)[0];
      f2[e3] = t3;
    } else f2.shadowing = a2;
    if (o2 != null) if (typeof o2 == `object`) {
      let [e3, t3] = Object.entries(o2)[0];
      f2[e3] = t3;
    } else f2.shape = o2;
    if (s2 != null) if (typeof s2 == `object`) {
      let [e3, t3] = Object.entries(s2)[0];
      f2[e3] = t3;
    } else f2.sprite = s2;
    if (l2 != null) if (typeof l2 == `object`) {
      let [e3, t3] = Object.entries(l2)[0];
      f2[e3] = t3;
    } else f2.techn = l2;
    if (u2 != null) if (typeof u2 == `object`) {
      let [e3, t3] = Object.entries(u2)[0];
      f2[e3] = t3;
    } else f2.legendText = u2;
    if (d2 != null) if (typeof d2 == `object`) {
      let [e3, t3] = Object.entries(d2)[0];
      f2[e3] = t3;
    } else f2.legendSprite = d2;
  }
}, `updateElStyle`), te = d(function(e2, t2, n2, r2, i2, a2, o2) {
  let s2 = D.find((e3) => e3.from === t2 && e3.to === n2);
  if (s2 !== void 0) {
    if (r2 != null) if (typeof r2 == `object`) {
      let [e3, t3] = Object.entries(r2)[0];
      s2[e3] = t3;
    } else s2.textColor = r2;
    if (i2 != null) if (typeof i2 == `object`) {
      let [e3, t3] = Object.entries(i2)[0];
      s2[e3] = t3;
    } else s2.lineColor = i2;
    if (a2 != null) if (typeof a2 == `object`) {
      let [e3, t3] = Object.entries(a2)[0];
      s2[e3] = parseInt(t3);
    } else s2.offsetX = parseInt(a2);
    if (o2 != null) if (typeof o2 == `object`) {
      let [e3, t3] = Object.entries(o2)[0];
      s2[e3] = parseInt(t3);
    } else s2.offsetY = parseInt(o2);
  }
}, `updateRelStyle`), ne = d(function(e2, t2, n2) {
  let r2 = A, i2 = j;
  if (typeof t2 == `object`) {
    let e3 = Object.values(t2)[0];
    r2 = parseInt(e3);
  } else r2 = parseInt(t2);
  if (typeof n2 == `object`) {
    let e3 = Object.values(n2)[0];
    i2 = parseInt(e3);
  } else i2 = parseInt(n2);
  r2 >= 1 && (A = r2), i2 >= 1 && (j = i2);
}, `updateLayoutConfig`), re = d(function() {
  return A;
}, `getC4ShapeInRow`), ie = d(function() {
  return j;
}, `getC4BoundaryInRow`), ae = d(function() {
  return w;
}, `getCurrentBoundaryParse`), U = d(function() {
  return T;
}, `getParentBoundaryParse`), W = d(function(e2) {
  return e2 == null ? S : S.filter((t2) => t2.parentBoundary === e2);
}, `getC4ShapeArray`), G = d(function(e2) {
  return S.find((t2) => t2.alias === e2);
}, `getC4Shape`), K = d(function(e2) {
  return Object.keys(W(e2));
}, `getC4ShapeKeys`), q = d(function(e2) {
  return e2 == null ? E : E.filter((t2) => t2.parentBoundary === e2);
}, `getBoundaries`), oe = q, se = d(function() {
  return D;
}, `getRels`), ce = d(function() {
  return O;
}, `getTitle`), le = d(function(e2) {
  k = e2;
}, `setWrap`), J = d(function() {
  return k;
}, `autoWrap`), ue = { addPersonOrSystem: I, addPersonOrSystemBoundary: z, addContainer: L, addContainerBoundary: B, addComponent: R, addDeploymentNode: V, popBoundaryParseStack: H, addRel: F, updateElStyle: ee, updateRelStyle: te, updateLayoutConfig: ne, autoWrap: J, setWrap: le, getC4ShapeArray: W, getC4Shape: G, getC4ShapeKeys: K, getBoundaries: q, getBoundarys: oe, getCurrentBoundaryParse: ae, getParentBoundaryParse: U, getRels: se, getTitle: ce, getC4Type: N, getC4ShapeInRow: re, getC4BoundaryInRow: ie, setAccTitle: e, getAccTitle: s, getAccDescription: n, setAccDescription: l, getConfig: d(() => r().c4, `getConfig`), clear: d(function() {
  S = [], E = [{ alias: `global`, label: { text: `global` }, type: { text: `global` }, tags: null, link: null, parentBoundary: `` }], T = ``, w = `global`, C = [``], D = [], C = [``], O = ``, k = false, A = 4, j = 2;
}, `clear`), LINETYPE: { SOLID: 0, DOTTED: 1, NOTE: 2, SOLID_CROSS: 3, DOTTED_CROSS: 4, SOLID_OPEN: 5, DOTTED_OPEN: 6, LOOP_START: 10, LOOP_END: 11, ALT_START: 12, ALT_ELSE: 13, ALT_END: 14, OPT_START: 15, OPT_END: 16, ACTIVE_START: 17, ACTIVE_END: 18, PAR_START: 19, PAR_AND: 20, PAR_END: 21, RECT_START: 22, RECT_END: 23, SOLID_POINT: 24, DOTTED_POINT: 25 }, ARROWTYPE: { FILLED: 0, OPEN: 1 }, PLACEMENT: { LEFTOF: 0, RIGHTOF: 1, OVER: 2 }, setTitle: d(function(e2) {
  O = t(e2, r());
}, `setTitle`), setC4Type: P }, de = d(function(e2, t2) {
  return _(e2, t2);
}, `drawRect`), fe = d(function(e2, t2, n2, r2, i2, a2) {
  let o2 = e2.append(`image`);
  o2.attr(`width`, t2), o2.attr(`height`, n2), o2.attr(`x`, r2), o2.attr(`y`, i2);
  let s2 = a2.startsWith(`data:image/png;base64`) ? a2 : (0, y.sanitizeUrl)(a2);
  o2.attr(`xlink:href`, s2);
}, `drawImage`), pe = d((e2, t2, n2) => {
  let r2 = e2.append(`g`), i2 = 0;
  for (let e3 of t2) {
    let t3 = e3.textColor ? e3.textColor : `#444444`, a2 = e3.lineColor ? e3.lineColor : `#444444`, o2 = e3.offsetX ? parseInt(e3.offsetX) : 0, s2 = e3.offsetY ? parseInt(e3.offsetY) : 0;
    if (i2 === 0) {
      let t4 = r2.append(`line`);
      t4.attr(`x1`, e3.startPoint.x), t4.attr(`y1`, e3.startPoint.y), t4.attr(`x2`, e3.endPoint.x), t4.attr(`y2`, e3.endPoint.y), t4.attr(`stroke-width`, `1`), t4.attr(`stroke`, a2), t4.style(`fill`, `none`), e3.type !== `rel_b` && t4.attr(`marker-end`, `url(#arrowhead)`), (e3.type === `birel` || e3.type === `rel_b`) && t4.attr(`marker-start`, `url(#arrowend)`), i2 = -1;
    } else {
      let t4 = r2.append(`path`);
      t4.attr(`fill`, `none`).attr(`stroke-width`, `1`).attr(`stroke`, a2).attr(`d`, `Mstartx,starty Qcontrolx,controly stopx,stopy `.replaceAll(`startx`, e3.startPoint.x).replaceAll(`starty`, e3.startPoint.y).replaceAll(`controlx`, e3.startPoint.x + (e3.endPoint.x - e3.startPoint.x) / 2 - (e3.endPoint.x - e3.startPoint.x) / 4).replaceAll(`controly`, e3.startPoint.y + (e3.endPoint.y - e3.startPoint.y) / 2).replaceAll(`stopx`, e3.endPoint.x).replaceAll(`stopy`, e3.endPoint.y)), e3.type !== `rel_b` && t4.attr(`marker-end`, `url(#arrowhead)`), (e3.type === `birel` || e3.type === `rel_b`) && t4.attr(`marker-start`, `url(#arrowend)`);
    }
    let l2 = n2.messageFont();
    Y(n2)(e3.label.text, r2, Math.min(e3.startPoint.x, e3.endPoint.x) + Math.abs(e3.endPoint.x - e3.startPoint.x) / 2 + o2, Math.min(e3.startPoint.y, e3.endPoint.y) + Math.abs(e3.endPoint.y - e3.startPoint.y) / 2 + s2, e3.label.width, e3.label.height, { fill: t3 }, l2), e3.techn && e3.techn.text !== `` && (l2 = n2.messageFont(), Y(n2)(`[` + e3.techn.text + `]`, r2, Math.min(e3.startPoint.x, e3.endPoint.x) + Math.abs(e3.endPoint.x - e3.startPoint.x) / 2 + o2, Math.min(e3.startPoint.y, e3.endPoint.y) + Math.abs(e3.endPoint.y - e3.startPoint.y) / 2 + n2.messageFontSize + 5 + s2, Math.max(e3.label.width, e3.techn.width), e3.techn.height, { fill: t3, "font-style": `italic` }, l2));
  }
}, `drawRels`), me = d(function(e2, t2, n2) {
  let r2 = e2.append(`g`), i2 = t2.bgColor ? t2.bgColor : `none`, a2 = t2.borderColor ? t2.borderColor : `#444444`, o2 = t2.fontColor ? t2.fontColor : `black`, s2 = { "stroke-width": 1, "stroke-dasharray": `7.0,7.0` };
  t2.nodeType && (s2 = { "stroke-width": 1 }), de(r2, { x: t2.x, y: t2.y, fill: i2, stroke: a2, width: t2.width, height: t2.height, rx: 2.5, ry: 2.5, attrs: s2 });
  let l2 = n2.boundaryFont();
  l2.fontWeight = `bold`, l2.fontSize += 2, l2.fontColor = o2, Y(n2)(t2.label.text, r2, t2.x, t2.y + t2.label.Y, t2.width, t2.height, { fill: `#444444` }, l2), t2.type && t2.type.text !== `` && (l2 = n2.boundaryFont(), l2.fontColor = o2, Y(n2)(t2.type.text, r2, t2.x, t2.y + t2.type.Y, t2.width, t2.height, { fill: `#444444` }, l2)), t2.descr && t2.descr.text !== `` && (l2 = n2.boundaryFont(), l2.fontSize -= 2, l2.fontColor = o2, Y(n2)(t2.descr.text, r2, t2.x, t2.y + t2.descr.Y, t2.width, t2.height, { fill: `#444444` }, l2));
}, `drawBoundary`), he = d(function(e2, t2, n2) {
  var _a2;
  let r2 = t2.bgColor ? t2.bgColor : n2[t2.typeC4Shape.text + `_bg_color`], i2 = t2.borderColor ? t2.borderColor : n2[t2.typeC4Shape.text + `_border_color`], a2 = t2.fontColor ? t2.fontColor : `#FFFFFF`, o2 = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=`;
  switch (t2.typeC4Shape.text) {
    case `person`:
      o2 = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=`;
      break;
    case `external_person`:
      o2 = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=`;
      break;
  }
  let s2 = e2.append(`g`);
  s2.attr(`class`, `person-man`);
  let l2 = v();
  switch (t2.typeC4Shape.text) {
    case `person`:
    case `external_person`:
    case `system`:
    case `external_system`:
    case `container`:
    case `external_container`:
    case `component`:
    case `external_component`:
      l2.x = t2.x, l2.y = t2.y, l2.fill = r2, l2.width = t2.width, l2.height = t2.height, l2.stroke = i2, l2.rx = 2.5, l2.ry = 2.5, l2.attrs = { "stroke-width": 0.5 }, de(s2, l2);
      break;
    case `system_db`:
    case `external_system_db`:
    case `container_db`:
    case `external_container_db`:
    case `component_db`:
    case `external_component_db`:
      s2.append(`path`).attr(`fill`, r2).attr(`stroke-width`, `0.5`).attr(`stroke`, i2).attr(`d`, `Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height`.replaceAll(`startx`, t2.x).replaceAll(`starty`, t2.y).replaceAll(`half`, t2.width / 2).replaceAll(`height`, t2.height)), s2.append(`path`).attr(`fill`, `none`).attr(`stroke-width`, `0.5`).attr(`stroke`, i2).attr(`d`, `Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10`.replaceAll(`startx`, t2.x).replaceAll(`starty`, t2.y).replaceAll(`half`, t2.width / 2));
      break;
    case `system_queue`:
    case `external_system_queue`:
    case `container_queue`:
    case `external_container_queue`:
    case `component_queue`:
    case `external_component_queue`:
      s2.append(`path`).attr(`fill`, r2).attr(`stroke-width`, `0.5`).attr(`stroke`, i2).attr(`d`, `Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half`.replaceAll(`startx`, t2.x).replaceAll(`starty`, t2.y).replaceAll(`width`, t2.width).replaceAll(`half`, t2.height / 2)), s2.append(`path`).attr(`fill`, `none`).attr(`stroke-width`, `0.5`).attr(`stroke`, i2).attr(`d`, `Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half`.replaceAll(`startx`, t2.x + t2.width).replaceAll(`starty`, t2.y).replaceAll(`half`, t2.height / 2));
      break;
  }
  let u2 = we(n2, t2.typeC4Shape.text);
  switch (s2.append(`text`).attr(`fill`, a2).attr(`font-family`, u2.fontFamily).attr(`font-size`, u2.fontSize - 2).attr(`font-style`, `italic`).attr(`lengthAdjust`, `spacing`).attr(`textLength`, t2.typeC4Shape.width).attr(`x`, t2.x + t2.width / 2 - t2.typeC4Shape.width / 2).attr(`y`, t2.y + t2.typeC4Shape.Y).text(`<<` + t2.typeC4Shape.text + `>>`), t2.typeC4Shape.text) {
    case `person`:
    case `external_person`:
      fe(s2, 48, 48, t2.x + t2.width / 2 - 24, t2.y + t2.image.Y, o2);
      break;
  }
  let d2 = n2[t2.typeC4Shape.text + `Font`]();
  return d2.fontWeight = `bold`, d2.fontSize += 2, d2.fontColor = a2, Y(n2)(t2.label.text, s2, t2.x, t2.y + t2.label.Y, t2.width, t2.height, { fill: a2 }, d2), d2 = n2[t2.typeC4Shape.text + `Font`](), d2.fontColor = a2, t2.techn && ((_a2 = t2.techn) == null ? void 0 : _a2.text) !== `` ? Y(n2)(t2.techn.text, s2, t2.x, t2.y + t2.techn.Y, t2.width, t2.height, { fill: a2, "font-style": `italic` }, d2) : t2.type && t2.type.text !== `` && Y(n2)(t2.type.text, s2, t2.x, t2.y + t2.type.Y, t2.width, t2.height, { fill: a2, "font-style": `italic` }, d2), t2.descr && t2.descr.text !== `` && (d2 = n2.personFont(), d2.fontColor = a2, Y(n2)(t2.descr.text, s2, t2.x, t2.y + t2.descr.Y, t2.width, t2.height, { fill: a2 }, d2)), t2.height;
}, `drawC4Shape`), ge = d(function(e2) {
  e2.append(`defs`).append(`symbol`).attr(`id`, `database`).attr(`fill-rule`, `evenodd`).attr(`clip-rule`, `evenodd`).append(`path`).attr(`transform`, `scale(.5)`).attr(`d`, `M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z`);
}, `insertDatabaseIcon`), _e = d(function(e2) {
  e2.append(`defs`).append(`symbol`).attr(`id`, `computer`).attr(`width`, `24`).attr(`height`, `24`).append(`path`).attr(`transform`, `scale(.5)`).attr(`d`, `M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z`);
}, `insertComputerIcon`), ve = d(function(e2) {
  e2.append(`defs`).append(`symbol`).attr(`id`, `clock`).attr(`width`, `24`).attr(`height`, `24`).append(`path`).attr(`transform`, `scale(.5)`).attr(`d`, `M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z`);
}, `insertClockIcon`), ye = d(function(e2) {
  e2.append(`defs`).append(`marker`).attr(`id`, `arrowhead`).attr(`refX`, 9).attr(`refY`, 5).attr(`markerUnits`, `userSpaceOnUse`).attr(`markerWidth`, 12).attr(`markerHeight`, 12).attr(`orient`, `auto`).append(`path`).attr(`d`, `M 0 0 L 10 5 L 0 10 z`);
}, `insertArrowHead`), be = d(function(e2) {
  e2.append(`defs`).append(`marker`).attr(`id`, `arrowend`).attr(`refX`, 1).attr(`refY`, 5).attr(`markerUnits`, `userSpaceOnUse`).attr(`markerWidth`, 12).attr(`markerHeight`, 12).attr(`orient`, `auto`).append(`path`).attr(`d`, `M 10 0 L 0 5 L 10 10 z`);
}, `insertArrowEnd`), xe = d(function(e2) {
  e2.append(`defs`).append(`marker`).attr(`id`, `filled-head`).attr(`refX`, 18).attr(`refY`, 7).attr(`markerWidth`, 20).attr(`markerHeight`, 28).attr(`orient`, `auto`).append(`path`).attr(`d`, `M 18,7 L9,13 L14,7 L9,1 Z`);
}, `insertArrowFilledHead`), Se = d(function(e2) {
  e2.append(`defs`).append(`marker`).attr(`id`, `sequencenumber`).attr(`refX`, 15).attr(`refY`, 15).attr(`markerWidth`, 60).attr(`markerHeight`, 40).attr(`orient`, `auto`).append(`circle`).attr(`cx`, 15).attr(`cy`, 15).attr(`r`, 6);
}, `insertDynamicNumber`), Ce = d(function(e2) {
  let t2 = e2.append(`defs`).append(`marker`).attr(`id`, `crosshead`).attr(`markerWidth`, 15).attr(`markerHeight`, 8).attr(`orient`, `auto`).attr(`refX`, 16).attr(`refY`, 4);
  t2.append(`path`).attr(`fill`, `black`).attr(`stroke`, `#000000`).style(`stroke-dasharray`, `0, 0`).attr(`stroke-width`, `1px`).attr(`d`, `M 9,2 V 6 L16,4 Z`), t2.append(`path`).attr(`fill`, `none`).attr(`stroke`, `#000000`).style(`stroke-dasharray`, `0, 0`).attr(`stroke-width`, `1px`).attr(`d`, `M 0,1 L 6,7 M 6,1 L 0,7`);
}, `insertArrowCrossHead`), we = d((e2, t2) => ({ fontFamily: e2[t2 + `FontFamily`], fontSize: e2[t2 + `FontSize`], fontWeight: e2[t2 + `FontWeight`] }), `getC4ShapeFont`), Y = (function() {
  function e2(e3, t3, n3, i2, a2, o2, s2) {
    r2(t3.append(`text`).attr(`x`, n3 + a2 / 2).attr(`y`, i2 + o2 / 2 + 5).style(`text-anchor`, `middle`).text(e3), s2);
  }
  d(e2, `byText`);
  function t2(e3, t3, n3, i2, a2, s2, l2, u2) {
    let { fontSize: d2, fontFamily: f2, fontWeight: p2 } = u2, m2 = e3.split(o.lineBreakRegex);
    for (let e4 = 0; e4 < m2.length; e4++) {
      let o2 = e4 * d2 - d2 * (m2.length - 1) / 2, s3 = t3.append(`text`).attr(`x`, n3 + a2 / 2).attr(`y`, i2).style(`text-anchor`, `middle`).attr(`dominant-baseline`, `middle`).style(`font-size`, d2).style(`font-weight`, p2).style(`font-family`, f2);
      s3.append(`tspan`).attr(`dy`, o2).text(m2[e4]).attr(`alignment-baseline`, `mathematical`), r2(s3, l2);
    }
  }
  d(t2, `byTspan`);
  function n2(e3, n3, i2, a2, o2, s2, l2, u2) {
    let d2 = n3.append(`switch`), f2 = d2.append(`foreignObject`).attr(`x`, i2).attr(`y`, a2).attr(`width`, o2).attr(`height`, s2).append(`xhtml:div`).style(`display`, `table`).style(`height`, `100%`).style(`width`, `100%`);
    f2.append(`div`).style(`display`, `table-cell`).style(`text-align`, `center`).style(`vertical-align`, `middle`).text(e3), t2(e3, d2, i2, a2, o2, s2, l2, u2), r2(f2, l2);
  }
  d(n2, `byFo`);
  function r2(e3, t3) {
    for (let n3 in t3) t3.hasOwnProperty(n3) && e3.attr(n3, t3[n3]);
  }
  return d(r2, `_setTextAttrs`), function(r3) {
    return r3.textPlacement === `fo` ? n2 : r3.textPlacement === `old` ? e2 : t2;
  };
})(), X = { drawRect: de, drawBoundary: me, drawC4Shape: he, drawRels: pe, drawImage: fe, insertArrowHead: ye, insertArrowEnd: be, insertArrowFilledHead: xe, insertDynamicNumber: Se, insertArrowCrossHead: Ce, insertDatabaseIcon: ge, insertComputerIcon: _e, insertClockIcon: ve }, Te = 0, Ee = 0, De = 4, Oe = 2;
b.yy = ue;
var Z = {}, ke = (_a = class {
  constructor(e2) {
    this.name = ``, this.data = {}, this.data.startx = void 0, this.data.stopx = void 0, this.data.starty = void 0, this.data.stopy = void 0, this.data.widthLimit = void 0, this.nextData = {}, this.nextData.startx = void 0, this.nextData.stopx = void 0, this.nextData.starty = void 0, this.nextData.stopy = void 0, this.nextData.cnt = 0, Ae(e2.db.getConfig());
  }
  setData(e2, t2, n2, r2) {
    this.nextData.startx = this.data.startx = e2, this.nextData.stopx = this.data.stopx = t2, this.nextData.starty = this.data.starty = n2, this.nextData.stopy = this.data.stopy = r2;
  }
  updateVal(e2, t2, n2, r2) {
    e2[t2] === void 0 ? e2[t2] = n2 : e2[t2] = r2(n2, e2[t2]);
  }
  insert(e2) {
    this.nextData.cnt = this.nextData.cnt + 1;
    let t2 = this.nextData.startx === this.nextData.stopx ? this.nextData.stopx + e2.margin : this.nextData.stopx + e2.margin * 2, n2 = t2 + e2.width, r2 = this.nextData.starty + e2.margin * 2, i2 = r2 + e2.height;
    (t2 >= this.data.widthLimit || n2 >= this.data.widthLimit || this.nextData.cnt > De) && (t2 = this.nextData.startx + e2.margin + Z.nextLinePaddingX, r2 = this.nextData.stopy + e2.margin * 2, this.nextData.stopx = n2 = t2 + e2.width, this.nextData.starty = this.nextData.stopy, this.nextData.stopy = i2 = r2 + e2.height, this.nextData.cnt = 1), e2.x = t2, e2.y = r2, this.updateVal(this.data, `startx`, t2, Math.min), this.updateVal(this.data, `starty`, r2, Math.min), this.updateVal(this.data, `stopx`, n2, Math.max), this.updateVal(this.data, `stopy`, i2, Math.max), this.updateVal(this.nextData, `startx`, t2, Math.min), this.updateVal(this.nextData, `starty`, r2, Math.min), this.updateVal(this.nextData, `stopx`, n2, Math.max), this.updateVal(this.nextData, `stopy`, i2, Math.max);
  }
  init(e2) {
    this.name = ``, this.data = { startx: void 0, stopx: void 0, starty: void 0, stopy: void 0, widthLimit: void 0 }, this.nextData = { startx: void 0, stopx: void 0, starty: void 0, stopy: void 0, cnt: 0 }, Ae(e2.db.getConfig());
  }
  bumpLastMargin(e2) {
    this.data.stopx += e2, this.data.stopy += e2;
  }
}, d(_a, `Bounds`), _a), Ae = d(function(e2) {
  a(Z, e2), e2.fontFamily && (Z.personFontFamily = Z.systemFontFamily = Z.messageFontFamily = e2.fontFamily), e2.fontSize && (Z.personFontSize = Z.systemFontSize = Z.messageFontSize = e2.fontSize), e2.fontWeight && (Z.personFontWeight = Z.systemFontWeight = Z.messageFontWeight = e2.fontWeight);
}, `setConf`), je = d((e2, t2) => ({ fontFamily: e2[t2 + `FontFamily`], fontSize: e2[t2 + `FontSize`], fontWeight: e2[t2 + `FontWeight`] }), `c4ShapeFont`), Me = d((e2) => ({ fontFamily: e2.boundaryFontFamily, fontSize: e2.boundaryFontSize, fontWeight: e2.boundaryFontWeight }), `boundaryFont`), Ne = d((e2) => ({ fontFamily: e2.messageFontFamily, fontSize: e2.messageFontSize, fontWeight: e2.messageFontWeight }), `messageFont`);
function Q(e2, t2, n2, r2, i2) {
  if (!t2[e2].width) if (n2) t2[e2].text = p(t2[e2].text, i2, r2), t2[e2].textLines = t2[e2].text.split(o.lineBreakRegex).length, t2[e2].width = i2, t2[e2].height = m(t2[e2].text, r2);
  else {
    let n3 = t2[e2].text.split(o.lineBreakRegex);
    t2[e2].textLines = n3.length;
    let i3 = 0;
    t2[e2].height = 0, t2[e2].width = 0;
    for (let a2 of n3) t2[e2].width = Math.max(h(a2, r2), t2[e2].width), i3 = m(a2, r2), t2[e2].height = t2[e2].height + i3;
  }
}
d(Q, `calcC4ShapeTextWH`);
var Pe = d(function(e2, t2, n2) {
  t2.x = n2.data.startx, t2.y = n2.data.starty, t2.width = n2.data.stopx - n2.data.startx, t2.height = n2.data.stopy - n2.data.starty, t2.label.y = Z.c4ShapeMargin - 35;
  let r2 = t2.wrap && Z.wrap, i2 = Me(Z);
  i2.fontSize += 2, i2.fontWeight = `bold`, Q(`label`, t2, r2, i2, h(t2.label.text, i2)), X.drawBoundary(e2, t2, Z);
}, `drawBoundary`), Fe = d(function(e2, t2, n2, r2) {
  let i2 = 0;
  for (let a2 of r2) {
    i2 = 0;
    let r3 = n2[a2], o2 = je(Z, r3.typeC4Shape.text);
    switch (o2.fontSize -= 2, r3.typeC4Shape.width = h(`\xAB` + r3.typeC4Shape.text + `\xBB`, o2), r3.typeC4Shape.height = o2.fontSize + 2, r3.typeC4Shape.Y = Z.c4ShapePadding, i2 = r3.typeC4Shape.Y + r3.typeC4Shape.height - 4, r3.image = { width: 0, height: 0, Y: 0 }, r3.typeC4Shape.text) {
      case `person`:
      case `external_person`:
        r3.image.width = 48, r3.image.height = 48, r3.image.Y = i2, i2 = r3.image.Y + r3.image.height;
        break;
    }
    r3.sprite && (r3.image.width = 48, r3.image.height = 48, r3.image.Y = i2, i2 = r3.image.Y + r3.image.height);
    let s2 = r3.wrap && Z.wrap, l2 = Z.width - Z.c4ShapePadding * 2, u2 = je(Z, r3.typeC4Shape.text);
    u2.fontSize += 2, u2.fontWeight = `bold`, Q(`label`, r3, s2, u2, l2), r3.label.Y = i2 + 8, i2 = r3.label.Y + r3.label.height, r3.type && r3.type.text !== `` ? (r3.type.text = `[` + r3.type.text + `]`, Q(`type`, r3, s2, je(Z, r3.typeC4Shape.text), l2), r3.type.Y = i2 + 5, i2 = r3.type.Y + r3.type.height) : r3.techn && r3.techn.text !== `` && (r3.techn.text = `[` + r3.techn.text + `]`, Q(`techn`, r3, s2, je(Z, r3.techn.text), l2), r3.techn.Y = i2 + 5, i2 = r3.techn.Y + r3.techn.height);
    let d2 = i2, f2 = r3.label.width;
    r3.descr && r3.descr.text !== `` && (Q(`descr`, r3, s2, je(Z, r3.typeC4Shape.text), l2), r3.descr.Y = i2 + 20, i2 = r3.descr.Y + r3.descr.height, f2 = Math.max(r3.label.width, r3.descr.width), d2 = i2 - r3.descr.textLines * 5), f2 += Z.c4ShapePadding, r3.width = Math.max(r3.width || Z.width, f2, Z.width), r3.height = Math.max(r3.height || Z.height, d2, Z.height), r3.margin = r3.margin || Z.c4ShapeMargin, e2.insert(r3), X.drawC4Shape(t2, r3, Z);
  }
  e2.bumpLastMargin(Z.c4ShapeMargin);
}, `drawC4ShapeArray`), $ = (_b = class {
  constructor(e2, t2) {
    this.x = e2, this.y = t2;
  }
}, d(_b, `Point`), _b), Ie = d(function(e2, t2) {
  let n2 = e2.x, r2 = e2.y, i2 = t2.x, a2 = t2.y, o2 = n2 + e2.width / 2, s2 = r2 + e2.height / 2, l2 = Math.abs(n2 - i2), u2 = Math.abs(r2 - a2), d2 = u2 / l2, f2 = e2.height / e2.width, p2 = null;
  return r2 == a2 && n2 < i2 ? p2 = new $(n2 + e2.width, s2) : r2 == a2 && n2 > i2 ? p2 = new $(n2, s2) : n2 == i2 && r2 < a2 ? p2 = new $(o2, r2 + e2.height) : n2 == i2 && r2 > a2 && (p2 = new $(o2, r2)), n2 > i2 && r2 < a2 ? p2 = f2 >= d2 ? new $(n2, s2 + d2 * e2.width / 2) : new $(o2 - l2 / u2 * e2.height / 2, r2 + e2.height) : n2 < i2 && r2 < a2 ? p2 = f2 >= d2 ? new $(n2 + e2.width, s2 + d2 * e2.width / 2) : new $(o2 + l2 / u2 * e2.height / 2, r2 + e2.height) : n2 < i2 && r2 > a2 ? p2 = f2 >= d2 ? new $(n2 + e2.width, s2 - d2 * e2.width / 2) : new $(o2 + e2.height / 2 * l2 / u2, r2) : n2 > i2 && r2 > a2 && (p2 = f2 >= d2 ? new $(n2, s2 - e2.width / 2 * d2) : new $(o2 - e2.height / 2 * l2 / u2, r2)), p2;
}, `getIntersectPoint`), Le = d(function(e2, t2) {
  let n2 = { x: 0, y: 0 };
  n2.x = t2.x + t2.width / 2, n2.y = t2.y + t2.height / 2;
  let r2 = Ie(e2, n2);
  return n2.x = e2.x + e2.width / 2, n2.y = e2.y + e2.height / 2, { startPoint: r2, endPoint: Ie(t2, n2) };
}, `getIntersectPoints`), Re = d(function(e2, t2, n2, r2) {
  let i2 = 0;
  for (let e3 of t2) {
    i2 += 1;
    let t3 = e3.wrap && Z.wrap, a2 = Ne(Z);
    r2.db.getC4Type() === `C4Dynamic` && (e3.label.text = i2 + `: ` + e3.label.text);
    let o2 = h(e3.label.text, a2);
    Q(`label`, e3, t3, a2, o2), e3.techn && e3.techn.text !== `` && (o2 = h(e3.techn.text, a2), Q(`techn`, e3, t3, a2, o2)), e3.descr && e3.descr.text !== `` && (o2 = h(e3.descr.text, a2), Q(`descr`, e3, t3, a2, o2));
    let s2 = Le(n2(e3.from), n2(e3.to));
    e3.startPoint = s2.startPoint, e3.endPoint = s2.endPoint;
  }
  X.drawRels(e2, t2, Z);
}, `drawRels`);
function ze(e2, t2, n2, r2, i2) {
  let a2 = new ke(i2);
  a2.data.widthLimit = n2.data.widthLimit / Math.min(Oe, r2.length);
  for (let [o2, s2] of r2.entries()) {
    let r3 = 0;
    s2.image = { width: 0, height: 0, Y: 0 }, s2.sprite && (s2.image.width = 48, s2.image.height = 48, s2.image.Y = r3, r3 = s2.image.Y + s2.image.height);
    let l2 = s2.wrap && Z.wrap, u2 = Me(Z);
    if (u2.fontSize += 2, u2.fontWeight = `bold`, Q(`label`, s2, l2, u2, a2.data.widthLimit), s2.label.Y = r3 + 8, r3 = s2.label.Y + s2.label.height, s2.type && s2.type.text !== `` && (s2.type.text = `[` + s2.type.text + `]`, Q(`type`, s2, l2, Me(Z), a2.data.widthLimit), s2.type.Y = r3 + 5, r3 = s2.type.Y + s2.type.height), s2.descr && s2.descr.text !== ``) {
      let e3 = Me(Z);
      e3.fontSize -= 2, Q(`descr`, s2, l2, e3, a2.data.widthLimit), s2.descr.Y = r3 + 20, r3 = s2.descr.Y + s2.descr.height;
    }
    if (o2 == 0 || o2 % Oe === 0) {
      let e3 = n2.data.startx + Z.diagramMarginX, t3 = n2.data.stopy + Z.diagramMarginY + r3;
      a2.setData(e3, e3, t3, t3);
    } else {
      let e3 = a2.data.stopx === a2.data.startx ? a2.data.startx : a2.data.stopx + Z.diagramMarginX, t3 = a2.data.starty;
      a2.setData(e3, e3, t3, t3);
    }
    a2.name = s2.alias;
    let d2 = i2.db.getC4ShapeArray(s2.alias), f2 = i2.db.getC4ShapeKeys(s2.alias);
    f2.length > 0 && Fe(a2, e2, d2, f2), t2 = s2.alias;
    let p2 = i2.db.getBoundaries(t2);
    p2.length > 0 && ze(e2, t2, a2, p2, i2), s2.alias !== `global` && Pe(e2, s2, a2), n2.data.stopy = Math.max(a2.data.stopy + Z.c4ShapeMargin, n2.data.stopy), n2.data.stopx = Math.max(a2.data.stopx + Z.c4ShapeMargin, n2.data.stopx), Te = Math.max(Te, n2.data.stopx), Ee = Math.max(Ee, n2.data.stopy);
  }
}
d(ze, `drawInsideBoundary`);
var Be = { drawPersonOrSystemArray: Fe, drawBoundary: Pe, setConf: Ae, draw: d(function(e2, t2, n2, a2) {
  Z = r().c4;
  let o2 = r().securityLevel, s2;
  o2 === `sandbox` && (s2 = f(`#i` + t2));
  let l2 = f(o2 === `sandbox` ? s2.nodes()[0].contentDocument.body : `body`), d2 = a2.db;
  a2.db.setWrap(Z.wrap), De = d2.getC4ShapeInRow(), Oe = d2.getC4BoundaryInRow(), u.debug(`C:${JSON.stringify(Z, null, 2)}`);
  let p2 = o2 === `sandbox` ? l2.select(`[id="${t2}"]`) : f(`[id="${t2}"]`);
  X.insertComputerIcon(p2), X.insertDatabaseIcon(p2), X.insertClockIcon(p2);
  let m2 = new ke(a2);
  m2.setData(Z.diagramMarginX, Z.diagramMarginX, Z.diagramMarginY, Z.diagramMarginY), m2.data.widthLimit = screen.availWidth, Te = Z.diagramMarginX, Ee = Z.diagramMarginY;
  let h2 = a2.db.getTitle();
  ze(p2, ``, m2, a2.db.getBoundaries(``), a2), X.insertArrowHead(p2), X.insertArrowEnd(p2), X.insertArrowCrossHead(p2), X.insertArrowFilledHead(p2), Re(p2, a2.db.getRels(), a2.db.getC4Shape, a2), m2.data.stopx = Te, m2.data.stopy = Ee;
  let g2 = m2.data, _2 = g2.stopy - g2.starty + 2 * Z.diagramMarginY, v2 = g2.stopx - g2.startx + 2 * Z.diagramMarginX;
  h2 && p2.append(`text`).text(h2).attr(`x`, (g2.stopx - g2.startx) / 2 - 4 * Z.diagramMarginX).attr(`y`, g2.starty + Z.diagramMarginY), i(p2, _2, v2, Z.useMaxWidth);
  let y2 = h2 ? 60 : 0;
  p2.attr(`viewBox`, g2.startx - Z.diagramMarginX + ` -` + (Z.diagramMarginY + y2) + ` ` + v2 + ` ` + (_2 + y2)), u.debug(`models:`, g2);
}, `draw`) }, Ve = { parser: x, db: ue, renderer: Be, styles: d((e2) => `.person {
    stroke: ${e2.personBorder};
    fill: ${e2.personBkg};
  }
`, `getStyles`), init: d(({ c4: e2, wrap: t2 }) => {
  Be.setConf(e2), ue.setWrap(t2);
}, `init`) };
export {
  Ve as diagram
};
